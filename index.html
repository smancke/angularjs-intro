<!doctype html>
<!-- 
Author: Sebastian Mancke
License: CreativeCommons Attribution-ShareAlike, http://creativecommons.org/licenses/by-sa/3.0/
--><html ng-app="presentation">
  <head>
    <title>AngularJS Einführung</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=800" />
    <link href="./lib/bootstrap.css" rel="stylesheet" media="screen"/>
    <script src="./lib/jquery.min.js"></script>
    <script src="./lib/bootstrap.min.js"></script>
    <script src="./lib/angular.min.js"></script>
    <script src="./lib/angular-route.min.js"></script>
    <script src="./lib/angular-mocks-http.js"></script>
    <script src="./lib/angular-locale_de-de.js"></script>
    <script src="./lib/angular-resource.min.js"></script>

    <link href="./lib/prettify/prettify.css" rel="stylesheet" media="screen"/>
    <script src="./lib/prettify/prettify.js"></script>

    <script src="./tarent-slide/tarent-slide.js"></script>
    <link href="./tarent-slide/tarent-slide.css" rel="stylesheet"/>


<!--    <script src="./lib/live.js"></script> --> 

    <script>
     /**
      * This directive allows us to list code from the live presentation examples
      * within a pretified listing.
      */
     app.directive('listingOf', [function () {
       return {
         restrict: 'AE',

         link: function (scope, elem, attrs) {
           var targetElement = $( '#' + attrs.listingOf );
           var html = targetElement.html();
           html = html.replace(/^[\t ]*\n+/, ""); //remove empty lines at begin

           while (html[0] == ' ') {        
             html = html.replace(/^ /, ""); //remove indentationn of first lines
             html = html.replace(/\n /g, "\n"); //remove indentationn of all other lines
           }

           // split long lines on white spaces
           lines = html.split("\n");
           html = '';

           for (var i=0; i<lines.length; i++) {
             var pos = lines[i].lastIndexOf(' ', 85)
             if (lines[i].length > 85 && pos != -1) {
               html += lines[i].substring(0, pos);
               html += "\n";
               while (lines[i] == ' ') {
                 html += ' ';
               }
               html += ' ';
               html += lines[i].substring(pos);
             } else {
               html += lines[i];
             }
             html += "\n";
           }

           html = html.trim();
           
           html = html.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
           html = html.replace(/\s?ng-binding/g, '')
                      .replace(/\s?ng-pristine/g, '')
                      .replace(/\s?ng-scope/g, '')
                      .replace(/\s?ng-valid/g, '')
                      .replace(/ class="\s?"/g, '');
           html = html.replace(/\n.*!-- ngIf:.*/g, '');
           html = html.replace(/\n.*!-- ngRepeat:.*/g, '');
           elem.html(html+elem.html());
           elem.addClass('prettyprint');
         }              
       }
     }]);
    </script>
  </head>
  <body onload="prettyPrint()">

    <slide>
        <img style="position: relative; top: 200px; left: 0px" src="res/angular_logo.png">
        <div style="position: relative; top: 50px; right: 20px; margin: auto;">
          <p>
            <h2 style="text-align: right; font-size: 80px; line-height: 80px;">AngularJS</h2>
            <h2 style="text-align: right">Sebastian Mancke</h2>
            <h6 style="text-align: right">Creative Commons BY-SA 3.0</h6>
          </p>
        </div>
    </slide>

    <slide>
      <h1>AngularJS - Einordnung</h1>
      <br>
      <h2>Kernkonzepte</h2>
      <ul>
        <li>Umfassendes MVC Framework</li>
        <li>Ausgerichtet auf Single Page Apps</li>
        <li>Browser-Seitiges Templating</li>
        <li>Designed auf Testbarkeit</li>
      </ul>
      <br>
      <h2>Abgrenzung</h2>
      <ul>
        <li>zu JQuery: Deklarativ, wenig Hacking im DOM</li>
        <li>zu Knockout.JS: Viel umfassender</li>
      </ul>
    </slide>

    <slide>
      <h1>Die Basics</h1>
      <h2>Deklaration und Includes</h2>      
      <br>
      <pre class="prettyprint" style="padding-bottom: 0px">
&lt;html ng-app="presentation"&gt;
...
&lt;script src="./lib/jquery.min.js"&gt;&lt;/script&gt;
&lt;script src="./lib/angular.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  var app = angular.module('presentation', []);
&lt;/script&gt;</pre>
      <br><ul>
        <li>Eine Page kann mehrere Apps beinhalten.</li>
        <li>angular.min.js ~ 97K
        <li>Initialisierungszeit inkl. JQuery: ~250ms</li>
        <li>Nutzt JQuery, kann aber auch ohne (eingeschränkte Funktionalität)</li>
      </ul>
    </slide>
    
    <slide>
      <div id="simpleBindingExample">
        <h1>Einfache Bindings {{demo}}</h1>
        AngularJS erm&ouml;glicht ein Templating direkt im Browser.
        <p>Demo: {{demo}}</p>
        <input class="form-control" type="text" ng-model="demo"> 
      </div>
      <hr/>
      <pre listing-of="simpleBindingExample"></pre>
    </slide>

    <slide>
      <h1>Bindings - weitere Beispiele</h1>
      AngularJS verfügt über eine Reihe praktischer Hilfsmittel für Bindings: <code>ng-model</code>, <code>ng-if</code>, <code>ng-init</code>

      <br><br>
      <pre listing-of="checkboxBindingExample">

&lt;h3 ng-if="state != 'disabled'">AngularJS ist cool!&lt;/h3&gt;</pre>
      <hr>
      <div id="checkboxBindingExample">
        <input type="checkbox" ng-model="state" ng-true-value="enabled" ng-false-value="disabled" ng-init="state='enabled'">
        <p>State: {{state}}</p>
        <select class="form-control" ng-model="state">
          <option>enabled</option>
          <option>disabled</option>
        </select>
        <h3 ng-if="state == 'enabled'">AngularJS ist cool!</h3>      
      </div>
    </slide>

    <slide>
      <h1>Bindings - classen und styles</h1>
      Für typische HTML-Aufgaben hat AngularJS passende Direktiven.
      <br>
      <h2><code>ng-class</code></h2>
      <pre listing-of="styleBindingExample"></pre>  
      <div id="styleBindingExample">
        <input type="checkbox" ng-model="everyThingOk" ng-init="everyThingOk=true">
        <span ng-class="{'alert-success':everyThingOk, 'alert-danger':!everyThingOk }"  class="alert">This is the message</span>
      </div>
      <br>
      <hr/>
      <h2><code>ng-style</code></h2>
      <pre listing-of="styleBindingExample2"></pre>  
      <div id="styleBindingExample2">
        <button class="btn" ng-click="myStyle={color:'red', 'font-weight':'bold'}">red</button>
        <button class="btn" ng-click="myStyle={'color':'blue'}">blue</button>
        <span ng-style="myStyle">Sample Text, myStyle={{myStyle}}</span>
      </div>
    </slide>   
   
    <script id="bindingExample1">
     app.controller('BindingsCtrl1', function($scope) {
       console.log('init controller ..');
       $scope.answer = 42;
       $scope.anyFunction = function () {
         $scope.question = ', is the answer!';
       }});
    </script>
    <slide>
      <h1>Controller</h1>
      <h3>Logik ist in AngularJS in Controllern organisert.</h3>
      <ul>
        <li>Controller definieren einen <b>Scope</b> für Variablen.</li>
        <li>Initialisierungscode wird direkt ausgeführt.</li>
        <li>Funktionen werden im <code>$scope</code> agbelegt.</li>
      </ul>
      <hr/>
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-8">
            <pre listing-of="bindingExample1"></pre>
          </div>
          <div class="col-md-offset-1 col-md-3" id="bindingExampleHtml1">
            <div ng-controller="BindingsCtrl1">
              <button type="button" class="btn" ng-click="anyFunction()">Click me</button>
              <h3>{{answer}}{{question}}</h3>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <pre listing-of="bindingExampleHtml1"></pre>
          </div>
        </div>
      </div>      
    </slide>

    <script id="formaterController">     
     app.controller('FormaterCtrl', function($scope) {
       $scope.number = 42;
       $scope.time = new Date();                
     });
     app.filter('custom', function() {
       return function(value) {
         return '-' + value +'.00 bli bla';
       }
     })
    </script>
    <slide ng-controller="FormaterCtrl">
      <h1>Formater</h1>
      <h3>Zur Formatierung von Werten gibt es Formater.</h3>
      
      <pre listing-of="formaterController"></pre>
      <pre listing-of="formaterControllerUsage"></pre>
      <hr/>
      <div id="formaterControllerUsage">
        <div>Number: {{number | number:4}}</div>
        <div>Currency: {{number | currency}}</div>
        <div>Custom: {{number | custom}}</div>
        <div>Time: {{time | date:'medium'}}</div>
      </div>
    </slide>

    <script id="repeatController">
     app.controller('RepeatController', function($scope) {
       $scope.persons = [
         {first: 'Arthur', last: 'Dent'},
         {first: 'Zaphod', last: 'Beeblebrox'},
         {first: 'Marvin', last: 'robot'},
       ]});
    </script>
    <slide>
      <h1>Iteration über Daten</h1>
      <h3>Mit <code>ng-repeat</code> lassen sich einfach Tabellen und Listen aufbauen.</h3>
      <pre listing-of="repeatController"></pre>
      <pre class="prettyprint">
&lt;table class=".." ng-controller="RepeatController"&gt;
  &lt;tr ng-repeat="person in persons"&gt;
    &lt;td&gt;{&#8203;{person.first}}&lt;/td&gt; &lt;td&gt;{&#8203;{person.last}}&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre>
      <table class="table table-striped table-bordered" ng-controller="RepeatController">
        <tr ng-repeat="person in persons">
          <td>{{person.first}}</td>
          <td>{{person.last}}</td>
        </tr>
      </table>
    </slide>

    <slide ng-controller="RepeatController">
      <h1>Iteration - Filter + Sortierung</h1>
      <h3>Filter und Sortierung lassen sich einfach einbauen.</h3>
      <pre listing-of="searchOrder"></pre>
      <pre listing-of="searchFilter"></pre>
      <pre class="prettyprint">&lt;tr ng-repeat="person in persons | orderBy:filterRow | filter: filterText"&gt;</pre>

      <form class="form-inline" role="form">
        <div class="form-group" id="searchOrder" >
          <select class="form-control" ng-model="orderField">
            <option>first</option>
            <option>last</option>
          </select>
        </div>
        <div class="form-group" id="searchFilter" >
          <input class="form-control" type="text" ng-model="filterText"> 
        </div>
      </form>
      <br>
      <table class="table table-striped table-bordered" >
        <tr ng-repeat="person in persons | orderBy:orderField | filter: filterText">
          <td>{{person.first}}</td>
          <td>{{person.last}}</td>
        </tr>
      </table>
    </slide>

    <slide>
      <h1>Scopes</h1>
      <h2>Was sind Scopes</h2>
      <ul>
        <li>Scopes sind die AngularJS-Datenobjekte, die das Modell beinhalten.</li>
        <li>Jeder Ausdruck wird im Kontext eines Scope ausgeführt.</li>
        <li>Die Scopes sind hierarchisch entlang des DOM geschachtelt.</li>
      </ul>
      <h2>Child Scopes</h2>
      <ul>
        <li>Scopes können geschachtelt werden.</li>
        <li>Geschachtelte Scopes erben Properties des übergeordneten Scope.</li>
        <li>Eigene Properties sind nach außen nicht sichtbar.</li>
      </ul>
      <h2>Isolierte Scopes</h2>
      <ul>
        <li>Erben keine Daten.</li>
        <li>Können aber Properties über ein Mapping an Parent Scope binden.</li>        
      </ul>
    </slide>

    <slide>
      <h1>Änderungen überwachen</h1>      
      <h2><code>$scope.$watch()</code></h2>
      <h3>Mit $watch() kann das Datenmodell überwacht werden.</h3>
      Verwendung: <code>$watch(watchExpression, [listener], [objectEquality]);</code>
      
      <br>
      <br>
      <h2><code>$scope.$watchCollection()</code>
      <h3>Dienst zur Beobachtung der Inhalte von Collections.</h3>
      Verwendung: <code>$watchCollection(obj, listener);</code>
      
      <br>
      <br>
      <hr>
      <pre class="prettyprint">
$scope.$watch('backlogItems', function(newValue, oldValue) {
    console.log('user has modified "$scope.backlogItems" ..');
    ..
}, true);</pre>
    </slide>

    <slide>
      <h1><code>$scope.$apply()</code></h1>
        <h3>Manipulationen am Datenmodell müssen immer im Kontext von 
          AngularJS erfolgen. Sonst erfolgt kein Update der View.</h3>
        <br>
        <h3>Dies kann über <code>$scope.apply()</code> erzwungen werden.</h3>
        <br>
        <h3>Häufigste Anwendung: 
          <ul>
            <li>window.setTimeout()</li>
            <li>native DOM-Events</li>
            <li>Einbindung vorhandener Komponenten</li>
          </ul>
        </h3>
    </slide>

    <script id="svgController">
     app.controller('SVGCtrl', function($scope) {
       var shift = 135;
       $scope.circle = { r:130, x: shift, y: shift };

       function update() {
         $scope.date = new Date();       

         var sec = $scope.date.getSeconds()  + $scope.date.getMilliseconds()/1000;
         var min = $scope.date.getMinutes() + $scope.date.getSeconds()/60;
         var h = $scope.date.getHours()%12 + $scope.date.getMinutes()/60;

         $scope.sec = { x: shift + 100 * Math.cos(sec/60 * Math.PI * 2 - Math.PI/2),
                        y: shift + 100 * Math.sin(sec/60 * Math.PI * 2 - Math.PI/2)};
         $scope.min = { x: shift + 100 * Math.cos(min/60 * Math.PI * 2 - Math.PI/2),
                        y: shift + 100 * Math.sin(min/60 * Math.PI * 2 - Math.PI/2)};
         $scope.hour = { x: shift + 40 * Math.cos(h/12 * Math.PI * 2 - Math.PI/2),
                         y: shift + 40* Math.sin(h/12 * Math.PI * 2 - Math.PI/2)};

         window.setTimeout(function() {$scope.$apply(update)}, 100);
       }       
       update();
     });
    </script>
    <slide ng-controller="SVGCtrl">
      <h1>AngularJS Spielereien mit SVG</h1>
      <h3>Nicht nur HTML lässt sich mit Bindings versehen!</h3>
      <pre listing-of="svg"></pre>
      {{date | date:'medium'}}
      <div id="svg" style="position: relative; left: 350px; top: -30px;">
        <svg width="280" height="280" xmlns="http://www.w3.org/2000/svg" version="1.1">
          <circle ng-attr-cx="{{circle.x}}" ng-attr-cy="{{circle.y}}" ng-attr-r="{{circle.r}}" style="stroke:#7D7D7D;fill:#EBEBEB"/>
          <line ng-attr-x1="{{circle.x}}"  ng-attr-y1="{{circle.y}}" ng-attr-x2="{{sec.x}}"  ng-attr-y2="{{sec.y}}" style="stroke:#E16969;stroke-width:1" />
          <line ng-attr-x1="{{circle.x}}"  ng-attr-y1="{{circle.y}}" ng-attr-x2="{{min.x}}"  ng-attr-y2="{{min.y}}" style="stroke:#E16969;stroke-width:5" />
          <line ng-attr-x1="{{circle.x}}"  ng-attr-y1="{{circle.y}}" ng-attr-x2="{{hour.x}}"  ng-attr-y2="{{hour.y}}" style="stroke:#E16969;stroke-width:5" />
        </svg>
      </div>
    </slide>

    <slide ng-controller="SVGCtrl">
      <h1>AngularJS Spielereien mit SVG</h1>
      <pre listing-of="svgController"></pre>
    </slide>
      
    <script id="service">
     app.service('helloService', function() {
       this.sayHello = function() {
         return "Hello, World!"
       };
     });
    </script>     
    <script id="factory">
     app.factory('helloFactory', function() {
       return {
         sayHello: function() {
           return "Hello, World!"
         }
       }});
    </script>
    <slide>
      <h1>Factories und Services</h1>
      Geteilte Daten oder zentrale Funktionalität der Controller werden ausgelagert. 
      <h2>Services</h2>
      <pre listing-of="service"></pre>
      <h2>Factories</h2>
      <pre listing-of="factory"></pre>
    </slide>

    <script id="dependencyInjection1">
     app.controller('DependencyInjection1', function($scope, helloService, helloFactory) {
       console.log(helloService.sayHello())
       console.log(helloFactory.sayHello());
     });
    </script>
    <script id="dependencyInjection2">
     app.controller('DependencyInjection2', ['$scope', 'helloService', 'helloFactory', 
                                         function($scope, helloService, helloFactory) {
       console.log(helloService.sayHello())
       console.log(helloFactory.sayHello());
     }]);
    </script>
    <slide>
      <h1>Dependency injection</h1>
      <h3>Abhängigkeiten in controllern werden 'injected':</h3>
      <pre listing-of="dependencyInjection1"></pre>
      <h3>Alternative Schreibweise:</h3>
      <ul>
        <li>Namen in Strings eingeschlossen</li>
        <li>Robust gegen minifying</li>
      </ul>
      <pre listing-of="dependencyInjection2"></pre>
    </slide>    

    <slide>
      <h1>Eigene Direktiven</h1>
      <h3>AngularJS stellt viele HTML-Erweiterungen (Direktiven) zur Verfügung.</h3>
      <h3>Eigene Direktiven lassen sich sehr einfach bauen.</h3>
      <pre class="prettyprint">
app.directive('name', function () {
   return {
        restrict: ..
        template: ..
        replace: ..
        templateURL: ..
        transclude: ..
        link: ..
        scope: ..
   }
});</pre>
    </script>
    <h3>Über die Parameter der Direktiven sind sehr unterschiedliche Anwendungsfälle abbildbar.</h3>
    </slide>

    <slide>
      <h1>Direktiven - <code>restrict:</code></h1>
      <h2>Verwendung als Element</h2>
      <pre class="prettyprint">
app.directive('myDirective', function () {
  return {
    restrict: 'E',
  }});</pre>
      <pre class="prettyprint">&lt;my-directive ...&gt;&lt;/my-directive&gt;</pre>

      <h2>Verwendung als Attribut</h2>
      <pre class="prettyprint">restrict: 'A',</pre>
      <pre class="prettyprint">&lt;div my-directive=".." ...&gt;&lt;/div&gt; oder &lt;div my-directive&gt;&lt;/div&gt;</pre> 

      <h2>Verwendung als Klasse</h2>
      <pre class="prettyprint">restrict: 'C',</pre>
      <pre class="prettyprint">&lt;div class="my-directive" ...&gt;&lt;/div&gt;</pre> 

      <h3>Die Kombination der Optionen geht auch, z.B. <code>restrict: 'AE';</code> </h3>
    </slide>

    <script id="myButton">
      app.directive('myButton', function () {
       return {
         restrict: 'E',
         template: '<button type="button" class="btn">click me</button>',
       }});
    </script>
    <slide>
      <h1>Direktiven - <code>template:</code></h1>
      HTML-Templates können auf einfache Weise angegeben werden.
      <h2>Java-Script</h2>
      <pre listing-of="myButton"></pre>
      <h2>Verwendung</h2>      
      <pre class="prettyprint">&lt;my-button/&gt;</pre>
      <h2>Ergebnis im Dom</h2>
      <pre listing-of="button"></pre>
      Mit <code>replace: true</code> würde das umgebende Tag ersetzt werden.
      <hr/>
      <div id="button">
        <my-button/>
      </div>
    </slide>

    <slide>
      <h1>Direktiven - <code>templateURL:</code></h1>
      <h3>Templates können auch extern definiert werden.</h3>
      <h3>Dabei sorgt ein <code>$templateCache</code> dafür, dies nur einmal zu laden.</h3>
      
      <br>
      <h2>Alternative 1: Externes laden von Templates:</h2>
      <pre class="prettyprint">templateULR: '/myButton.html'</pre>

      <br>
      <h2>Alternative 2: Definition im <code>&lt;script/&gt;</code>-Tag</h2>      
      <pre class="prettyprint">&lt;script type="text/ng-template id="/myButton.html"&gt;
  &lt;button type="button" class="btn"&gt;click me&lt;/button&gt;
&lt;/script&gt;</pre>
    </slide>
    
    <script id="myButton2">
      app.directive('myButton2', function () {
       return {
         restrict: 'E',
         transclude: true,
         template: '<button type="button" class="btn">\
                    <span ng-transclude></span></button>',
       }});
    </script>
    <slide>
      <h1>Direktiven - <code>transclude:</code></h1>
      Inhalte können auch in ein Template eingeschlossen werden.
      <h2>Java-Script</h2>
      <pre listing-of="myButton2"></pre>
      <h2>Verwendung</h2>      
      <pre class="prettyprint">&lt;my-button2&gt;That's the &lt;strong&gt;label!&lt;/strong&gt;&lt;my-button2/&gt;</pre>
      <hr/>
      <div id="transcludeButton">
        <my-button2>That's the <strong>label!</strong></my-button2>
      </div>
    </slide>

    <script id="myLinkedButton">
      app.directive('myLinkedButton', function () {
       return {
         restrict: 'E',
         template: '<button type="button" class="btn">click me</button>',
         link: function (scope, elem, attrs) {
           elem.on('click', function() {
             alert(attrs.message);
           });
         }}});
    </script>
    <slide>
      <h1>Direktiven - <code>link:</code></h1>
      <h3>Mit dem <code>link</code>-Attribut kann beliebiger Code ausführt werden.</h3>
      <ul>
        <li>Manipulation des Dom</li>
        <li>Registrierung von Event-Listenern</li>
        <li>Integration mit anderen JS-Libraries</li>
      </ul>
      <pre listing-of="myLinkedButton"></pre>
      <pre class="prettyprint">&lt;my-button message="42, ist the answer!"/&gt;</pre>
      <div id="button">
        <my-linked-button message="42, ist the answer!"/>
      </div>
    </slide>

    <script>
     app.controller('SayHelloCtrl', function($scope) {
       $scope.sayHello = function() {
         alert('Hello ..');
       };
     });
    </script>
    <script id="myScopedButton">     
     app.directive('myScopedButton', function () {
       return {
         restrict: 'E',
         scope: {
           myMessage: '@message', // read only mapping
           myModel: '=model', // two way binding 
           myAction: '&action', // function reference
         },
         template: '<input class="form-control" type="text" ng-model="myModel">\
          <button type="button" class="btn" ng-click="myAction()">{{myMessage}}</button>',
       }});
    </script>
    <slide>
      <h1>Direktiven - <code>scope:</code></h1>
      <h3>Direktiven können einen isolierten Scope besitzen.</h3>
      <pre listing-of="myScopedButton"></pre>
      <pre class="prettyprint">&lt;my-scoped-button message="I'm a button!" model="anyVar" action="sayHello()"&gt;&lt;/my-scoped-button&gt;</pre>
      <hr>
      <div id="scopedButton" ng-controller="SayHelloCtrl">
        <my-scoped-button message="I'm a button!" model="anyVar" action="sayHello()"></my-scoped-button>
        <div>anyVar: {{anyVar}}</div>
      </div>
    </slide>


    
    <div id="viewTemplates">
      <script type="text/ng-template" id="/defaultTemplate.html">
        <div style="background:grey; height: 300px; "><h3>Default Template</h3></div>
      </script>
      <script type="text/ng-template" id="/template1.html">
        <div style="background:green; height: 300px;"><h3>Template 1</h3></div>
      </script>
      <script type="text/ng-template" id="/template2.html">
        <div style="background:blue; height: 300px;"><h3>Template 2</h3></div>
      </script>
    </div>
    <script id="viewConfig">
     app.config(function($routeProvider) {
       $routeProvider
        .when('/template1', {
         templateUrl: '/template1.html',
       }).when('/template2', {
         templateUrl: '/template2.html',
       }).otherwise({
         templateUrl: '/defaultTemplate.html',
       });       
     });
    </script>
    <slide>
      <h1>Routing</h1>
      <h3>Seiten können modular aufgebaut werden.</h3>
      <h3>Views werden in Templates ausgelagert.</h3>
      <h3>Deep-Linking wird unterstützt.</h3>
      <a class="btn btn-default" href="#defaultTemplate?slide=24">defaultTemplate</a>
      <a class="btn btn-default" href="#template1?slide=24">template1</a>
      <a class="btn btn-default" href="#template2?slide=24">template2</a>
      <br><br>
      <div id="viewExample">
        <div ng-view></div>
      </div>
    </slide>
    <slide>
      <h1>Routing</h1>
      <pre listing-of="viewTemplates"></pre>
      <pre listing-of="viewConfig"></pre>
      <pre class="prettyprint">&lt;div ng-view&gt;&lt;/div&gt;</pre>
    </slide>
   
    <script id="httpExampleMocking">
     app.run(function($httpBackend) {     
       var people = [{id: 0, first: 'Arthur', last: 'Dent'},
                     {id: 1, first: 'Zaphod', last: 'Beeblebrox'}];
       $httpBackend.whenGET('/people').respond(people);
       $httpBackend.whenGET('/people/1').respond(people[1]);
       $httpBackend.expectPOST('/people/1').respond(function(data){return data});
       
       window.setTimeout(function() {
         $httpBackend.flush();
       }, 1000);
     });
    </script>
    <script id="httpExample">
     app.controller('httpExample', function($scope, $http) {
       $http.get('/people')
            .success(function (result) {
              $scope.httpResult = result;
            });
     });
    </script>
    <slide ng-controller="httpExample">
      <h1>Zugriff auf REST Ressourcen</h1>
      <h2><code>$http</code></h2>
      Einfache Api für HTTP-Operationen.
      <br><br>
      <pre listing-of="httpExample"></pre>
      <div>httpResult: <pre>{{httpResult}}</pre></div>
    </slide>

    <script id="resourceExample">
     app.controller('resourceExample', function($scope, $resource) {
       var Person = $resource('/people/:id', {id:'@id'});
       $scope.person = Person.get({id:1}, function() {
         $scope.person.first = 'new Name';
         $scope.person.$save();
       });       
     });
    </script>
    <slide ng-controller="resourceExample">
      <h1>Zugriff auf REST Ressourcen</h1>
      <h2><code>$resource</code></h2>
      <ul>
        <li>Eigenes Modul</li>
        <li>Promise-Objekte</li>
        <li>Objektorintierten Zugriff, z.B. <code>$save</code>, <code>$delete</code></li>
      </ul>
      <pre class="prettyprint">&lt;script src="./lib/angular-locale_de-de.js"/&gt;
var app = angular.module('presentation', ['ngResource']);</pre>
      <pre listing-of="resourceExample"></pre>
      <div>person: <pre>{{person}}</pre></div>
    </slide>

    <slide>
      <h1>Unit Testing - mocking</h1>
      <h3>AngularJS ist auf gute Testbarkeit designed!</h3>
      <h3>Durch Dependency-Injection lassen sich die Controller gut mocken.</h3>
      <h3>angular-mocks.js stellt einige Mocks zum Testen bereit.</h3>
      <h2>Beispiel <code>$httpBackend</code></h2>
      <pre listing-of="httpExampleMocking"></pre>
    </slide>

    <slide>
      <h1>Unit Testing - Frameworks</h1>
      <h2>Jasmine: Behavior-Driven Testing Framework</h2>
      <pre class="prettyprint">describe("A suite", function() {
  beforeEach(function() {
        ...
  });
  it("contains spec with an expectation", function() {
    expect(true).toBe(true);
  });
})</pre>
      <h2>Karma: Testrunner</h2>
      <ul>
        <li>Einfache Konfiguration</li>
        <li>Ständige Ausführung bei <kbd>Ctrl-S</kbd></li>
        <li>Gleichzeitiger Test in mehreren Browsern</li>
        <li>Mobile Browser können einfach angedockt werden</li>
      </ul>
    </slide>

    <slide>
      <h1>End-to-End Tests</h1>
      Klassischer selenium Ansatz hat Probleme mit waits und timeouts.
      <h2>Protractor: Web-Testing Framework</h2>
      <h3>Einfache Api, die im Hintergrund asynchron und auf Promises arbeitet.</h3>
      <ul>
        <li>node.js Applikation</li>
        <li>Nutzung von Jasmine möglich</li>
        <li>Basiert auf webDriver (standalone Selenium Server)</li>
        <li>Managemenent der webDriver-Dependencies</li>
      </ul>
    </slide>

    <slide>
      <h1>Weitere Quellen</h1>
      <h3><a href="http://angularjs.org/">http://angularjs.org/</a></h3>
      <h3><a href="https://docs.angularjs.org/api">https://docs.angularjs.org/api</a></h3>
      <h3><a href="https://www.youtube.com/channel/UCbn1OgGei-DV7aSRo_HaAiw">AngularJS Youtube Channel</a></h3>
      <h3><a href="https://www.exratione.com/2013/12/angularjs-headless-end-to-end-testing-with-protractor-and-selenium/">Anleitung zu Protractor/Selenium<a/></h3>
      <h3><a href="http://amitgharat.wordpress.com/2013/06/08/the-hitchhikers-guide-to-the-directive/">The Hitchhiker’s Guide to the Directive</a></h3>
  </body>
</html>
